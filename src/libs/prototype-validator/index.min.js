!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self)["btblab-validator"]=e()}(this,function(){"use strict";function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,u=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){u=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(u)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e){return void 0!==e.type&&f(t)==e.type}var r=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,a=/^\d+$/,s=/^\w+$/,o=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])$/,i=/^(?:(?:[0-9a-f]{2}):){5}(?:[0-9a-f]{2})/i;function m(t,e,n){switch(t){case"type":return u(e,n);case"strLength":return function(t,e){if(!u(t,{type:"string"}))return!1;var n=e.min?parseInt(e.min):void 0,r=e.max?parseInt(e.max):void 0;return u(n,{type:"number"})&&u(r,{type:"number"})?n<=t.length&&r>=t.length:u(n,{type:"number"})?n<=t.length:!!u(r,{type:"number"})&&r>=t.length}(e,n);case"strAbsLength":return function(t,e){if(!u(t,{type:"string"}))return!1;var n=parseInt(e.absolute);return!!u(n,{type:"number"})&&n===t.length}(e,n);case"numRange":return function(t,e){if(!u(t,{type:"number"}))return!1;var n=e.min?parseFloat(e.min):void 0,r=e.max?parseFloat(e.max):void 0;return u(n,{type:"number"})&&u(r,{type:"number"})?n<=t&&t<=r:u(n,{type:"number"})?n<=t:!!u(r,{type:"number"})&&t<=r}(e,n);case"numAbsValue":return function(t,e){if(!u(t,{type:"number"}))return!1;var n=parseFloat(e.absolute);return!!u(n,{type:"number"})&&n===t}(e,n);case"format":return function(t,e){if(!u(t,{type:"string"}))return!1;switch(e.type){case"email":return r.test(t);case"numeric":return a.test(t);case"literal":return s.test(t);case"ivp4":return o.test(t);case"mac":return i.test(t);default:return!1}}(e,n);default:return}}function p(){this.message="",this.status=null}return function(){var e={},i={},n=function(){return i={},Object.keys(e).map(function(t){i[t]=new p}),i},c=function(t){var u={};return t&&t.split(";").map(function(t){var e=l(t.split(":"),2),n=e[0],r=e[1];void 0!==n&&void 0!==r&&(u[n]=r)}),u};return{init:function(t){return e=t||{},n(),e},status:function(t){return t?i[t]:i},reset:n,validate:function(n,r){var u,a,s,o=new p;return e[n]?(e[n].find(function(t){switch(f(t.rule)){case"string":var e=l(t.rule.split("|"),2);u=e[0],a=e[1],u?(s=c(a),m(u,r,s)?(o.message="",o.status=!0):(o.message=t.message,o.status=!1)):(o.message="'BTB error: There has rule empty for the event key: ".concat(n),o.status=null);break;case"function":t.rule(r)?(o.message="",o.status=!0):(o.message=t.message,o.status=!1);break;default:o.message="",o.status=null}return!o.status}),i[n]=o):(o.message="'BTB error: There is no rule for the event key: ".concat(n),o.status=null),o}}}});
