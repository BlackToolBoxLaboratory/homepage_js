<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="./libs/fontawesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="./style/index.css">
    <link rel="stylesheet" type="text/css" href="./style/pages/index.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <title>BTB Lab. | JavaScript </title>
    <meta name="google-site-verification" content="XjkUm8M885lvmNSs9BKe9khMCQY99rSfGsN3Tf6yfBY" />

    <meta property="og:title" content="Black Tool Box Laboratory | JavaScript"/> 
    <meta property="og:type" content="website"/> 
    <meta property="og:url" content="https://blacktoolboxlaboratory.github.io/javascript"/>
    <meta property="og:image" content=""/>
    <meta name="description" property="og:description" content="Here are some components based on pure JavaScript which made by Black Tool Box Laboratory."/> 
    
    <meta property="fb:app_id" content="271733690121245"/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@vannoel0628" />
    <meta name="twitter:creator" content="@vannoel0628" />
  </head>
  <body id="main">
    <header class="main_header padding-sm">
      <div class="header_logo margin-sm radius-md">
        <div class="logo_content font-4xl font-bold">
          BJ
        </div>
      </div>
      <div class="header_title margin-sm">
        <div class="title_main font-bold font-xl">
          Black Tool Box Laboratory
        </div>
        <div class="title_sub">
          For JavaScript
        </div>
      </div>
      <div id="menu_trigger" class="header_menu font-xl margin-sm">
        <i class="fas fa-bars fa-fw"></i>
      </div>
    </header>

    <div class="main_body">
      <iframe id="page" class="body_iframe" src="./pages/about.html"></iframe>
    </div>

    <aside id="menu_container" class="main_aside"></aside>

    <script type="text/javascript" src="./libs/jquery/jquery.min.js"></script>
    <script>
      const routeMap = [
        {
          index: "about", 
          title:"About", 
          url: "./pages/about.html",
        },
        {
          index: "packages", 
          title: "Packages",
          children: [
            {
              index: "packages.prototype-languages",
              title: "Languages",
              url: "./pages/languages.html"
            },
            {
              index: "packages.prototype-validator",
              title: "Validator",
              url: "./pages/validator.html"
            }
          ]
        }
      ];
      function renderMenu() {
        var menu = "";
        menu = "<div class=\"aside_menu padding-x-lg\">";
        menu += renderMenuRecursive(0,routeMap);
        menu += "</div>"
        $("#menu_container").html(menu);

        $(".container_route.route-submenu").click(function() {
          var target_collapse = $($(this).children(".route_collapsed"));
          var target_layer = $(this).siblings(".menu_layer")
          if(target_collapse.hasClass("collapsed-on")) {
            target_collapse.removeClass("collapsed-on");
            target_layer.stop().slideDown();
          } else {
            target_collapse.addClass("collapsed-on");
            target_layer.stop().slideUp();
          }
        });

        $(".container_route.route-endNode").click(function() {
          // $('#page').setAttribute("src", this.getAttribute("path"));
          $("#page").attr("src", this.getAttribute("path"));
        });
      }
      function renderMenuRecursive (layer, map) {
        var route = "";
        if(map && map.length > 0) {
          route += "<ul class=\"menu_layer layer-"+ layer +"\">";
          map.forEach(function(entry) {
            var paddingLeft = layer*16;
            route += "<li class=\"layer_container\">";
              if(entry.children && entry.children.length > 0)
              {
                route += "<div class=\"container_route route-submenu padding-y-sm\" >";
                route += "<div class=\"route_title\" style=\"padding-left:"+paddingLeft+"px\">"+entry.title+"</div>";
                route += "<div class=\"route_collapsed transition-transform\"><i class=\"fas fa-caret-down fa-fw\"></i></div>";
                route += "</div>";
                route += renderMenuRecursive(layer+1, entry.children);
              } else {
                route += "<div class=\"container_route route-endNode padding-y-sm\" path=\""+ entry.url +"\">";
                route += "<div class=\"route_title\" style=\"padding-left:"+paddingLeft+"px\">"+entry.title+"</div>";
                route += "</div>";
              }
            route += "</li>";
          });
          route += "</ul>";
        };
        return route;
      };
      function loadEvent () {
        $("#menu_trigger").click(function(){
          if($("#menu_container").hasClass("aside-hidden")) {
            $("#menu_container").removeClass("aside-hidden");
          } else {
            $("#menu_container").addClass("aside-hidden");
          }
        });
      };

      renderMenu();
      $(document).ready(function(){
        loadEvent();
      });
    </script>
  </body>
</html>